---

- name: Determine if the Fedora Toolbox repository needs to be added to Karaf
  shell: "find {{ karaf_home }}/data/cache/ -type f | xargs grep {{ karaf_fctools_repoadd }}"
  register: fc_toolbox_repo_status
  changed_when: False
  ignore_errors: True


- name: Install Fedora Toolbox repository in Karaf
  command: "{{ karaf_home }}/bin/client feature:repo-add {{ karaf_fctools_repoadd }}"
  when: fc_toolbox_repo_status|failed
